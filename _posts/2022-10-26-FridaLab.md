---
title: "[Security] Android Frida"
excerpt: ""

categories:
  - Security
tags:
  - [Security, Frida]

permalink: /Security/FridaLab/

toc: true
toc_sticky: true

date: 2022-10-26
last_modified_at: 2022-10-26
---

FridaLab is an app to study the framework called Frida.
Before I knew this app, I kept coming to Crackme's Android, but it was difficult because I couldn't understand exactly how to use the API that Frida pursues.
My primary purpose of writing this article is to summarize why Frida was used this way.<br>
Let's get started ~

## ☝🏻 FridaLab01
#### Change class challenge_01's variable 'chall01' to 1:

```java
    package uk.rossmarks.fridalab;

    /* loaded from: classes.dex */
    public class challenge_01 {
        static int chall01;

    public static int getChall01Int() {
        return chall01;
        }
    }
```
<br>

첫번째 문제는 challenge_01 클래스의 chall01 변수에 접근해 그 값을 1로 변경하는 것입니다.
이 문제를 해결하기 위해 생각할 것은 3가지 입니다.

> 1) challenge_01 클래스에 어떻게 접근할 것인지
> 2) challenge_01 클래스에서 chall01변수로 어떻게 접근해야할지
> 3) 변수에 접근하여 그 값을 대입하여 주기(변경하기) 위해서는 어떻게 해야할지

<br>차근차근 해결해봅시다.<br>

### 클래스에 접근하는 방법
클래스를 통해 특정 메소드에 접근하는 방법으로는 두가지가 있습니다.
첫번째로 `Java.use(className)` API를 사용하는 것입니다.
두번째로는 `Java.choose(className,callback)` API를 이용하는 것입니다.

[ 각각의 설명에 대해서는 다른 블로그를 참조해주세요 ] -> [블로그](https://changkr28.tistory.com/entry/Frida-%EB%AC%B8%EB%B2%95)

### 메소드에 접근하는 방법
메소드에 접근하는 방법은 다른 프로그래밍 언어에서와 같습니다. `.` 을 이용하여 클래스의 메소드에 접근할 수 있습니다.

### 변수에 접근하는 방법
저는 이 부분에서 참조를 했는데요. <br>
값을 가져오는 방법으로 `value` 필드를 이용합니다.

## ✌🏻 Code
```javascript
    function sol1() {
        console.log("[>] Start");
        //     Java.perform API를 이용하여 가상머신과 연결되어잇는지 확인

    Java.perform(function(){
        // 후킹하고자 하는 변수가 static으로 선언되어 있기 때문에 use
        var className = Java.use('uk.rossmarks.fridalab.challenge_01');

    // 값 접근을 위해 value 사용
    className.chall01.value = 1;

    console.log("[>] 저장된 값: " + className.chall01.value);

    });
    }

    sol1();
```







